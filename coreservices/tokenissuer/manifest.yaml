general:
  hostname: tokenissuer.core
  description: The token issuer microservice generates and validates JWTs.
  package: github.com/microbus-io/fabric/coreservices/tokenissuer
  frameworkVersion: 1.22.0

functions:
  IssueToken:
    signature: IssueToken(claims MapClaims) (signedToken string)
    description: IssueToken generates a new JWT with a set of claims.
    method: ANY
    route: :444/issue-token
  ValidateToken:
    signature: ValidateToken(signedToken string) (claims MapClaims, valid bool)
    description: ValidateToken validates a JWT previously generated by this issuer and returns the claims associated with it.
    method: ANY
    route: :444/validate-token

configs:
  AuthTokenTTL:
    description: AuthTokenTTL sets the TTL of the JWT.
    type: time.Duration
    validation: dur [1m,]
    default: 720h
  SecretKey:
    description: SecretKey is a symmetrical key used to sign and validate the JWT when using the HMAC-SHA algorithm.
    type: string
    validation: str ^(|.{64,})$
  AltSecretKey:
    description: AltSecretKey is an alternative key used to validate the JWT when using the HMAC-SHA algorithm. Setting the previous secret key as an alternative key is useful when rotating keys.
    type: string
    validation: str ^(|.{64,})$
