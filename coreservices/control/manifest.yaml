# Copyright (c) 2023-2026 Microbus LLC and various contributors
# 
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# 
# 	http://www.apache.org/licenses/LICENSE-2.0
# 
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

general:
  name: Control
  hostname: control.core
  description: This microservice is created for the sake of generating the client API for the :888 control subscriptions. The microservice itself does nothing and should not be included in applications.
  package: github.com/microbus-io/fabric/coreservices/control
  frameworkVersion: 1.23.0

functions:
  Ping:
    signature: Ping() (pong int)
    description: Ping responds with a pong.
    method: ANY
    route: :888/ping
    loadBalancing: none
  ConfigRefresh:
    signature: ConfigRefresh()
    description: ConfigRefresh pulls the latest config values.
    method: ANY
    route: :888/config-refresh
    loadBalancing: none
  Trace:
    signature: Trace(id string)
    description: Trace forces exporting a tracing span.
    method: ANY
    route: :888/trace
    loadBalancing: none

webs:
  Metrics:
    description: Metrics returns Prometheus metrics.
    method: ANY
    route: :888/metrics
    loadBalancing: none

outboundEvents:
  OnNewSubs:
    signature: OnNewSubs()
    description: OnNewSubs informs of new subscriptions.
    method: POST
    route: :888/on-new-subs
