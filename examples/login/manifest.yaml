# Copyright (c) 2023-2026 Microbus LLC and various contributors
# 
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# 
# 	http://www.apache.org/licenses/LICENSE-2.0
# 
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

general:
  name: Login
  hostname: login.example
  description: The Login microservice demonstrates usage of authentication and authorization.
  package: github.com/microbus-io/fabric/examples/login
  frameworkVersion: 1.23.0

downstream:
  - hostname: tokenissuer.core
    package: github.com/microbus-io/fabric/coreservices/tokenissuer

webs:
  Login:
    description: Login renders a simple login screen that authenticates a user.
    method: ANY
    route: /login
  Logout:
    description: Logout renders a page that logs out the user.
    method: ANY
    route: /logout
  Welcome:
    description: Welcome renders a page that is shown to the user after a successful login. Rendering is adjusted based on the user's roles.
    method: ANY
    route: /welcome
    requiredClaims: roles.a || roles.m || roles.u
  AdminOnly:
    description: AdminOnly is only accessible by admins.
    method: GET
    route: /admin-only
    requiredClaims: roles.a
  ManagerOnly:
    description: ManagerOnly is only accessible by managers.
    method: GET
    route: /manager-only
    requiredClaims: roles.m
